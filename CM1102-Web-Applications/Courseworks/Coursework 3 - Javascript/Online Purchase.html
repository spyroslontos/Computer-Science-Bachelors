<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Online Purchase</title>
    <link rel="stylesheet" type="text/css" href="purchase.css">

    <script type="text/javascript">

        function validate() {
            var cardnumber = document.getElementById("cardnum").value;
            var expirationM = document.getElementById("exp").value;
            var expirationY = document.getElementById("exp2").value;
            var nameoncard = document.getElementById("nameoncard").value;
            var cvv2 = document.getElementById("cvv2").value;

            if (!/^\d{16}$/.test(cardnumber.replace(" ", ""))) {
                alert("Invalid Card Number");
                return false
            }

            else if (nameoncard.length === 0) {
                alert("Invalid Card Name");
                return false
            }

            else if (expirationM.length === 0 || parseInt(expirationM) > 12 || parseInt(expirationM) < 0 || !/^\d{1}$|^\d{2}$/.test(expirationM)) {
                alert("Invalid Expiration Month");
                return false
            }

            else if (expirationY.length === 0 || parseInt(expirationY) <= 2017 || !/^\d{4}$/.test(expirationY)) {
                alert("Invalid Expiration Year");
                return false
            }

            else if (cvv2.length === 0 || !/^\d{3}$/.test(cvv2) || cvv2 < 1) {
                alert("Invalid Security Code");
                return false
            }

            win = open("", "messWin");
            win.document.writeln("<h1>Purchase Complete</h1>\n");
            win.document.writeln("<h3>Thank you for ordering from us</h3>\n");
            win.document.writeln("<p>The item your ordered is on its way!</p>\n");
        }

        function blurtip() {
            document.getElementById("tip").innerHTML = "";
        }

        function focusnum() {
            document.getElementById("tip").innerHTML = "Enter your 16 digit Card Number";
        }

        function focusexpM() {
        document.getElementById("tip").innerHTML = "Enter your Card Expiration Month";
        }

        function focusexpY() {
            document.getElementById("tip").innerHTML = "Enter your Card Expiration Year";
        }

        function focusname() {
            document.getElementById("tip").innerHTML = "Enter your Card Name";
        }

        function focuscvv2() {
            document.getElementById("tip").innerHTML = "Enter your Security Code found on the back side of your Card";
        }

    </script>

</head>
<body>
<h1>Online Purchase Form</h1>
<h3>To purchase the items in your cart fill in the Form with valid information</h3><br/>
<p id="cart">Cart:</p>
<p>Javascript Book</p>

<img src="CreditCard.jpg" alt="credit card"/>

<form onsubmit="return validate()" id="form">
    <fieldset>
        <legend>Payment Method</legend>
        &ensp; &ensp; Card Number &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp; Expiration<br/>
        <input type="text" id="cardnum" placeholder="1234567812345678" onfocus="focusnum()" onblur="blurtip()">
        <input type="text" id="exp" placeholder="MM" onfocus="focusexpM()" onblur="blurtip()"> /
        <input type="text" id="exp2" placeholder="YYYY" onfocus="focusexpY()" onblur="blurtip()">
        <br/><br/>&ensp;&ensp;&ensp; Name on Card &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp; Security Code
        <br/><input type="text" id="nameoncard" placeholder="John Lewis" onfocus="focusname()" onblur="blurtip()">
        <input type="text" id="cvv2" placeholder="123" onfocus="focuscvv2()" onblur="blurtip()"> (CVV2) <br/>
        <br/> <input type="submit" id="submit">
    </fieldset>
</form>
<br/><br/>
<p id="tip"></p>

<noscript>
    Your browser does not support JavaScript!
</noscript>

</body>
</html>